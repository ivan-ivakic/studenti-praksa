# Hexis Script Core


## About

Contains core scripts used across Hexis projects. Supports IE9+

Note: Documentation always tries to provide info about the latest version. Older versions may differ.


## Installation

The only requirement is that you concatenate all core files before other scripts. jQuery as a dependency has been removed in 2.0.0.

2. Include ```hexis-commons/script-core/{version}/core/*.js``` (all core modules, alphabetically)
3. *All your website's scripts and modules afterwards*


## Function list

Below is a small overview list. For a more detailed understanding, refer to the file comments and code.


#### Polyfills
* [Window.requestAnimationFrame()](https://developer.mozilla.org/en-US/docs/Web/API/window/requestAnimationFrame)
* [Element.matches()](https://developer.mozilla.org/en-US/docs/Web/API/Element/matches)
* [Element.classList()](https://developer.mozilla.org/en-US/docs/Web/API/Element/classList)


#### Queues

**List of default queues**
- ```jQuery``` (executes when jQuery or Zepto finishes loading)
- ```documentLoad``` (executes when DOM becomes ready)
- ```pageLoad``` (used mostly for page transitions, e.g for ajax page switches)
- ```pageUnload``` (used mostly for page transitions, e.g for ajax page switches)
- ```globalClick``` (executes every time the users clicks)
- ```globalScroll``` (executes every time the users scrolls. Performance optimised)
- ```globalResize``` (executes every time the viewport resizes. Performance optimised)
- ```domTreeChange```

**Adding a function to queue**
```javascript
queue.globalResize.push(function myFunctionName(){
  // Your code here will get executed on "globalResize" event
});
```

**Trigerring a queue to execute all stored functions**
```javascript
queue.trigger('globalResize');
```

**Removing a function from the queue**
```javascript
queue.remove('myFunctionName', 'globalResize');
```


#### Helpers

* ```closest(target, wantedSelector, limiterSelector[optional])``` Finds the first matched parent in native javascript. Similar to jQuery's 'closest()
* ```whenReady(callback)``` Makes sure your callback function is fired when and if the documentReady event has fired
* ```whenLoaded(callback)``` Makes sure your callback function is fired when and if the entire page has loaded
* ```append(htmlString, targetElement)``` Appends an HTML string to the target element. Similar to jQuery's append()
* ```prepend(htmlString, targetElement)``` Prepends an HTML string to the target element. Similar to jQuery's prepend()
* ```App.lightScroll(callback, delay[optional])``` Performance optimised scroll listener. Fires on queue.globalScroll event
* ```App.lightResize(callback, delay[optional])``` Performance optimised resize listener. Fires on queue.globalResize event
* ```App.getScrollMetadata()``` Updates scroll metadata, such as current scroll offsets, direction, visible range, etc.
* ```App.getViewportMetadata()``` Updates viewport metadata such as width, height, screen size, etc.
* ```App.matchCondition(condition[string])``` Checks if a condition is true. Accepts Satin screen sizes, @2x resolution, mobile OS, and a custom selector which returns true if that element exists on the page. Accepts a reverse check with "!".
* * ```App.matchConditionAll(conditions[array])``` Checks an array of conditions using App.matchCondition(), and returns true if all of those conditions are matched.
* ```App.checkIfVisible(element, tresholdMultiplier[optional])``` Check if the target element is (about to be) visible on the screen. Adds a multiplier treshold to smooth out the experience
* ```animationTimeout(timeout, callback)``` setTimeout() abstraction which collapses any timeout to 0ms if the browser does not support css transitions. Used to gracefully degrade and provide faster feedback for such browsers.
